# FarFetch Parser

–ü–∞—Ä—Å–µ—Ä —Ç–æ–≤–∞—Ä–æ–≤ —Å —Å–∞–π—Ç–∞ FarFetch —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π Docker –¥–ª—è –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ–≥–æ —Å–±–æ—Ä–∞ –¥–∞–Ω–Ω—ã—Ö.

## üöÄ –ó–∞–ø—É—Å–∫ —á–µ—Ä–µ–∑ Docker (–†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

### –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

```bash
# 1. –°–æ–±—Ä–∞—Ç—å –∏ –∑–∞–ø—É—Å—Ç–∏—Ç—å –≤—Å–µ —Å–µ—Ä–≤–∏—Å—ã (MongoDB + 2 –ø–∞—Ä—Å–µ—Ä–∞)
docker-compose up --build

# 2. –ó–∞–ø—É—Å–∫ –≤ —Ñ–æ–Ω–æ–≤–æ–º —Ä–µ–∂–∏–º–µ
docker-compose up -d --build

# 3. –û—Å—Ç–∞–Ω–æ–≤–∫–∞
docker-compose down
```

### –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤

```bash
# –õ–æ–≥–∏ –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
docker-compose logs -f

# –õ–æ–≥–∏ —Ç–æ–ª—å–∫–æ –º—É–∂—Å–∫–æ–≥–æ –ø–∞—Ä—Å–µ—Ä–∞
docker-compose logs -f parser-male

# –õ–æ–≥–∏ —Ç–æ–ª—å–∫–æ –∂–µ–Ω—Å–∫–æ–≥–æ –ø–∞—Ä—Å–µ—Ä–∞
docker-compose logs -f parser-female

# –ü–æ—Å–ª–µ–¥–Ω–∏–µ 100 —Å—Ç—Ä–æ–∫ –ª–æ–≥–æ–≤
docker-compose logs --tail=100 parser-male

# –õ–æ–≥–∏ MongoDB
docker-compose logs -f mongo
```

### –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ—Ç–¥–µ–ª—å–Ω—ã–º–∏ —Å–µ—Ä–≤–∏—Å–∞–º–∏

```bash
# –ó–∞–ø—É—Å—Ç–∏—Ç—å —Ç–æ–ª—å–∫–æ MongoDB
docker-compose up mongo

# –ó–∞–ø—É—Å—Ç–∏—Ç—å —Ç–æ–ª—å–∫–æ –º—É–∂—Å–∫–æ–π –ø–∞—Ä—Å–µ—Ä
docker-compose up parser-male

# –ó–∞–ø—É—Å—Ç–∏—Ç—å —Ç–æ–ª—å–∫–æ –∂–µ–Ω—Å–∫–∏–π –ø–∞—Ä—Å–µ—Ä
docker-compose up parser-female

# –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π —Å–µ—Ä–≤–∏—Å
docker-compose restart parser-male

# –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π —Å–µ—Ä–≤–∏—Å
docker-compose stop parser-female
```

### –û—á–∏—Å—Ç–∫–∞

```bash
# –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∏ —É–¥–∞–ª–∏—Ç—å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã
docker-compose down

# –£–¥–∞–ª–∏—Ç—å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã + volumes (–í–ù–ò–ú–ê–ù–ò–ï: —É–¥–∞–ª–∏—Ç –¥–∞–Ω–Ω—ã–µ MongoDB!)
docker-compose down -v

# –ü–µ—Ä–µ—Å–æ–±—Ä–∞—Ç—å –æ–±—Ä–∞–∑—ã —Å –Ω—É–ª—è
docker-compose build --no-cache
```

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
parser/
‚îú‚îÄ‚îÄ main.py                    # –û—Å–Ω–æ–≤–Ω–æ–π —Å–∫—Ä–∏–ø—Ç –ø–∞—Ä—Å–µ—Ä–∞
‚îú‚îÄ‚îÄ requirements.txt           # Python –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
‚îú‚îÄ‚îÄ Dockerfile                 # –û–±—Ä–∞–∑ –¥–ª—è –ø–∞—Ä—Å–µ—Ä–∞
‚îú‚îÄ‚îÄ docker-compose.yaml        # –û—Ä–∫–µ—Å—Ç—Ä–∞—Ü–∏—è —Å–µ—Ä–≤–∏—Å–æ–≤
‚îú‚îÄ‚îÄ .dockerignore             # –ò—Å–∫–ª—é—á–µ–Ω–∏—è –ø—Ä–∏ —Å–±–æ—Ä–∫–µ –æ–±—Ä–∞–∑–∞
‚îú‚îÄ‚îÄ .gitignore                # Git –∏—Å–∫–ª—é—á–µ–Ω–∏—è
‚îú‚îÄ‚îÄ config/
‚îÇ   ‚îú‚îÄ‚îÄ config.yaml           # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –ø–∞—Ä—Å–µ—Ä–∞
‚îÇ   ‚îî‚îÄ‚îÄ config_models.py      # Pydantic –º–æ–¥–µ–ª–∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
‚îú‚îÄ‚îÄ scripts/
‚îÇ   ‚îî‚îÄ‚îÄ interfaces.py         # WebDriver, MongoDB, Playwright –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã
‚îú‚îÄ‚îÄ male_collection.json      # –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –ø–∞—Ä—Å–∏–Ω–≥–∞ (–º—É–∂—á–∏–Ω—ã)
‚îú‚îÄ‚îÄ female_collection.json    # –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –ø–∞—Ä—Å–∏–Ω–≥–∞ (–∂–µ–Ω—â–∏–Ω—ã)
‚îî‚îÄ‚îÄ mongo_data/               # –î–∞–Ω–Ω—ã–µ MongoDB (—Å–æ–∑–¥–∞–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏)
```

## üêç –õ–æ–∫–∞–ª—å–Ω—ã–π –∑–∞–ø—É—Å–∫ (–±–µ–∑ Docker)

### –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

```bash
pip install -r requirements.txt
playwright install chromium
```

### –ó–∞–ø—É—Å–∫

```bash
# –ü–∞—Ä—Å–∏–Ω–≥ –º—É–∂—Å–∫–æ–π –∫–æ–ª–ª–µ–∫—Ü–∏–∏
python main.py --gender male

# –ü–∞—Ä—Å–∏–Ω–≥ –∂–µ–Ω—Å–∫–æ–π –∫–æ–ª–ª–µ–∫—Ü–∏–∏
python main.py --gender female
```

## ‚öôÔ∏è –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç

### Docker –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

1. **mongo** - MongoDB –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
   - –ü–æ—Ä—Ç: 27017
   - –î–∞–Ω–Ω—ã–µ —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ volume `mongo_data`
   - Healthcheck –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏

2. **parser-male** - –ü–∞—Ä—Å–µ—Ä –º—É–∂—Å–∫–æ–π –∫–æ–ª–ª–µ–∫—Ü–∏–∏
   - –ó–∞–≤–∏—Å–∏—Ç –æ—Ç MongoDB
   - –õ–æ–≥–∏ –ø–∏—à—É—Ç—Å—è –≤ stdout (–¥–æ—Å—Ç—É–ø–Ω—ã —á–µ—Ä–µ–∑ `docker logs`)
   - –†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ `male_collection.json` –∏ MongoDB

3. **parser-female** - –ü–∞—Ä—Å–µ—Ä –∂–µ–Ω—Å–∫–æ–π –∫–æ–ª–ª–µ–∫—Ü–∏–∏
   - –ó–∞–≤–∏—Å–∏—Ç –æ—Ç MongoDB
   - –õ–æ–≥–∏ –ø–∏—à—É—Ç—Å—è –≤ stdout (–¥–æ—Å—Ç—É–ø–Ω—ã —á–µ—Ä–µ–∑ `docker logs`)
   - –†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ `female_collection.json` –∏ MongoDB

### –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

- **–í —Ñ–∞–π–ª—ã**: `male_collection.json`, `female_collection.json` (–Ω–∞ —Ö–æ—Å—Ç–µ)
- **–í Docker**: –≤—Å–µ `print()` –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ–ø–∞–¥–∞—é—Ç –≤ stdout –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞
- **–†–æ—Ç–∞—Ü–∏—è**: –ª–æ–≥–∏ Docker –æ–≥—Ä–∞–Ω–∏—á–µ–Ω—ã 10MB √ó 3 —Ñ–∞–π–ª–∞ (–Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç—Å—è –≤ docker-compose.yaml)

### Volumes

- `./male_collection.json:/app/male_collection.json` - —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –ø–∞—Ä—Å–∏–Ω–≥–∞ –º—É–∂—á–∏–Ω
- `./female_collection.json:/app/female_collection.json` - —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –ø–∞—Ä—Å–∏–Ω–≥–∞ –∂–µ–Ω—â–∏–Ω
- `./config:/app/config:ro` - –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è (read-only)
- `mongo_data:/data/db` - –¥–∞–Ω–Ω—ã–µ MongoDB

## üîß –ù–∞—Å—Ç—Ä–æ–π–∫–∞

### MongoDB –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ

–î–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ –∑–∞–ø—É—Å–∫–∞ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `localhost`, –¥–ª—è Docker - `mongo` (–∏–º—è —Å–µ—Ä–≤–∏—Å–∞).
–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è —á–µ—Ä–µ–∑ –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é –æ–∫—Ä—É–∂–µ–Ω–∏—è `MONGO_HOST`.

### –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –ø–∞—Ä—Å–µ—Ä–∞

–†–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ `config/config.yaml`:
- URLs –∫–∞—Ç–µ–≥–æ—Ä–∏–π
- –í—Ä–µ–º—è –∑–∞–≥—Ä—É–∑–∫–∏ —Å—Ç—Ä–∞–Ω–∏—Ü
- –î—Ä—É–≥–∏–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –ø–∞—Ä—Å–∏–Ω–≥–∞

## üìä –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

```bash
# –°—Ç–∞—Ç—É—Å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤
docker-compose ps

# –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Ä–µ—Å—É—Ä—Å–æ–≤
docker stats

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ MongoDB
docker exec -it farfetch-mongo mongosh -u admin123 -p password123

# –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ –≤ –∫–æ–ª–ª–µ–∫—Ü–∏—è—Ö
docker exec -it farfetch-mongo mongosh -u admin123 -p password123 farfetch_db \
  --eval "db.male_collection.countDocuments({})"
```

## ‚ùó Troubleshooting

### –û—à–∏–±–∫–∞ "Cannot connect to MongoDB"
```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ MongoDB –∑–∞–ø—É—â–µ–Ω –∏ –∑–¥–æ—Ä–æ–≤
docker-compose ps mongo
docker-compose logs mongo

# –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ MongoDB
docker-compose restart mongo
```

### –ë—Ä–∞—É–∑–µ—Ä Playwright –Ω–µ –Ω–∞–π–¥–µ–Ω
```bash
# –ü–µ—Ä–µ—Å–æ–±–µ—Ä–∏—Ç–µ –æ–±—Ä–∞–∑
docker-compose build --no-cache parser-male parser-female
```

### –§–∞–π–ª—ã JSON –Ω–µ –æ–±–Ω–æ–≤–ª—è—é—Ç—Å—è
```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ —Ñ–∞–π–ª—ã —Å—É—â–µ—Å—Ç–≤—É—é—Ç –Ω–∞ —Ö–æ—Å—Ç–µ
ls -lh male_collection.json female_collection.json

# –°–æ–∑–¥–∞–π—Ç–µ –ø—É—Å—Ç—ã–µ —Ñ–∞–π–ª—ã –µ—Å–ª–∏ –Ω—É–∂–Ω–æ
echo "[]" > male_collection.json
echo "[]" > female_collection.json
```

### –û—á–∏—Å—Ç–∫–∞ –∑–∞–≤–∏—Å—à–∏—Ö –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤
```bash
docker-compose down
docker system prune -a
```

## üìù –ü—Ä–∏–º–µ—á–∞–Ω–∏—è

- –ü–∞—Ä—Å–µ—Ä—ã —Ä–∞–±–æ—Ç–∞—é—Ç **–ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ** –¥–ª—è —É—Å–∫–æ—Ä–µ–Ω–∏—è —Å–±–æ—Ä–∞ –¥–∞–Ω–Ω—ã—Ö
- –ü—Ä–∏ –ø–∞–¥–µ–Ω–∏–∏ –æ–¥–Ω–æ–≥–æ –ø–∞—Ä—Å–µ—Ä–∞, –≤—Ç–æ—Ä–æ–π –ø—Ä–æ–¥–æ–ª–∂–∏—Ç —Ä–∞–±–æ—Ç—É
- –õ–æ–≥–∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Ä–æ—Ç–∏—Ä—É—é—Ç—Å—è (–Ω–µ –∑–∞–π–º—É—Ç –≤–µ—Å—å –¥–∏—Å–∫)
- JSON —Ñ–∞–π–ª—ã –¥–æ—Å—Ç—É–ø–Ω—ã –Ω–∞ —Ö–æ—Å—Ç–µ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
- MongoDB –¥–∞–Ω–Ω—ã–µ –ø–µ—Ä—Å–∏—Å—Ç–µ–Ω—Ç–Ω—ã (—Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –º–µ–∂–¥—É –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞–º–∏)

## üéØ –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

1. –ó–∞–ø—É—Å–∫–∞–π—Ç–µ –ø–∞—Ä—Å–µ—Ä—ã –≤ —Ñ–æ–Ω–µ: `docker-compose up -d`
2. –°–ª–µ–¥–∏—Ç–µ –∑–∞ –ª–æ–≥–∞–º–∏: `docker-compose logs -f`
3. –ü–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∏ –ø—Ä–æ–≤–µ—Ä—è–π—Ç–µ –ø—Ä–æ–≥—Ä–µ—Å—Å –≤ JSON —Ñ–∞–π–ª–∞—Ö
4. –î–µ–ª–∞–π—Ç–µ –±—ç–∫–∞–ø—ã `mongo_data/` –¥–ª—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö –ë–î

